# üöÄ Guide de D√©ploiement sur Render - Silence d'Or

## üéØ **Vue d'Ensemble**

Ce guide vous accompagne dans le d√©ploiement de votre e-commerce "Silence d'Or" sur la plateforme Render. Render est une plateforme cloud moderne qui simplifie le d√©ploiement d'applications Django.

---

## üìã **Pr√©requis**

### **Comptes Requis**
- ‚úÖ **Compte GitHub** - Pour h√©berger le code
- ‚úÖ **Compte Render** - Pour d√©ployer l'application
- ‚úÖ **Compte Stripe** - Pour les paiements (optionnel)
- ‚úÖ **Compte Gmail** - Pour l'envoi d'emails (optionnel)

### **Outils Requis**
- ‚úÖ **Git** - Pour la gestion de version
- ‚úÖ **Python 3.11+** - Pour le d√©veloppement local
- ‚úÖ **Navigateur web** - Pour acc√©der aux interfaces

---

## üîß **Pr√©paration du Code**

### **1. V√©rifier les Fichiers de D√©ploiement**

Assurez-vous que tous les fichiers suivants sont pr√©sents :

```
silence-dor-ecommerce/
‚îú‚îÄ‚îÄ requirements.txt              # D√©pendances Python
‚îú‚îÄ‚îÄ render.yaml                  # Configuration Render
‚îú‚îÄ‚îÄ env.example                  # Variables d'environnement
‚îú‚îÄ‚îÄ silence_dor/
‚îÇ   ‚îú‚îÄ‚îÄ settings_production.py   # Settings de production
‚îÇ   ‚îî‚îÄ‚îÄ urls.py                  # URLs avec health check
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ deploy.py                # Script de d√©ploiement
‚îî‚îÄ‚îÄ .gitignore                   # Fichiers √† ignorer
```

### **2. Ex√©cuter le Script de Pr√©paration**

```bash
# Ex√©cuter le script de d√©ploiement
python scripts/deploy.py
```

Ce script va :
- ‚úÖ V√©rifier tous les fichiers requis
- ‚úÖ Cr√©er le health check
- ‚úÖ Tester la configuration
- ‚úÖ Pr√©parer les fichiers statiques

---

## üì§ **D√©ploiement sur GitHub**

### **1. Initialiser Git (si pas d√©j√† fait)**

```bash
# Initialiser le repository
git init

# Ajouter tous les fichiers
git add .

# Premier commit
git commit -m "Initial commit - Silence d'Or E-commerce"
```

### **2. Cr√©er un Repository GitHub**

1. **Aller sur GitHub.com**
2. **Cliquer sur "New repository"**
3. **Nommer le repository** : `silence-dor-ecommerce`
4. **Choisir "Public" ou "Private"**
5. **Ne pas initialiser** avec README (d√©j√† pr√©sent)

### **3. Connecter le Repository Local**

```bash
# Ajouter l'origine GitHub
git remote add origin https://github.com/VOTRE_USERNAME/silence-dor-ecommerce.git

# Pousser le code
git push -u origin main
```

---

## üåê **Configuration sur Render**

### **1. Cr√©er un Compte Render**

1. **Aller sur render.com**
2. **S'inscrire** avec votre compte GitHub
3. **Autoriser l'acc√®s** √† vos repositories

### **2. Cr√©er un Nouveau Service**

1. **Cliquer sur "New +"**
2. **Choisir "Web Service"**
3. **Connecter votre repository GitHub**
4. **S√©lectionner** `silence-dor-ecommerce`

### **3. Configuration du Service Web**

**Informations de base :**
- **Name** : `silence-dor-web`
- **Environment** : `Python 3`
- **Region** : `Oregon (US West)`
- **Branch** : `main`
- **Root Directory** : `/` (laisser vide)

**Build & Deploy :**
- **Build Command** :
  ```bash
  pip install -r requirements.txt && python manage.py collectstatic --noinput --settings=silence_dor.settings_production && python manage.py migrate --settings=silence_dor.settings_production
  ```
- **Start Command** :
  ```bash
  gunicorn silence_dor.wsgi:application --bind 0.0.0.0:$PORT --settings=silence_dor.settings_production
  ```

### **4. Variables d'Environnement**

Ajouter les variables suivantes dans l'onglet "Environment" :

#### **Configuration Django**
```
DJANGO_SETTINGS_MODULE=silence_dor.settings_production
DEBUG=false
SECRET_KEY=[G√©n√©r√© automatiquement par Render]
ALLOWED_HOSTS=silence-dor.onrender.com,www.silence-dor.com
```

#### **Base de Donn√©es (automatique)**
```
DATABASE_URL=[Fourni automatiquement par Render]
```

#### **Cache Redis (automatique)**
```
REDIS_URL=[Fourni automatiquement par Render]
CELERY_BROKER_URL=[Fourni automatiquement par Render]
CELERY_RESULT_BACKEND=[Fourni automatiquement par Render]
```

#### **Email (optionnel)**
```
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_HOST_USER=votre-email@gmail.com
EMAIL_HOST_PASSWORD=votre-mot-de-passe-app
DEFAULT_FROM_EMAIL=noreply@silence-dor.com
```

#### **Stripe (optionnel)**
```
STRIPE_PUBLISHABLE_KEY=pk_test_votre_cle_publique
STRIPE_SECRET_KEY=sk_test_votre_cle_secrete
STRIPE_WEBHOOK_SECRET=whsec_votre_secret_webhook
```

---

## üóÑÔ∏è **Configuration de la Base de Donn√©es**

### **1. Cr√©er une Base de Donn√©es PostgreSQL**

1. **Dans Render, cliquer sur "New +"**
2. **Choisir "PostgreSQL"**
3. **Configuration :**
   - **Name** : `silence-dor-db`
   - **Database** : `silence_dor`
   - **User** : `silence_dor_user`
   - **Region** : `Oregon (US West)`
   - **Plan** : `Starter` (gratuit)

### **2. Connecter la Base de Donn√©es**

1. **Aller dans votre service web**
2. **Onglet "Environment"**
3. **La variable `DATABASE_URL` est automatiquement ajout√©e**

---

## üîÑ **Configuration de Redis**

### **1. Cr√©er un Service Redis**

1. **Dans Render, cliquer sur "New +"**
2. **Choisir "Redis"**
3. **Configuration :**
   - **Name** : `silence-dor-redis`
   - **Region** : `Oregon (US West)`
   - **Plan** : `Starter` (gratuit)

### **2. Connecter Redis**

1. **Aller dans votre service web**
2. **Onglet "Environment"**
3. **Les variables Redis sont automatiquement ajout√©es**

---

## ‚öôÔ∏è **Services Suppl√©mentaires**

### **1. Celery Worker (optionnel)**

Pour les t√¢ches asynchrones :

1. **Cr√©er un nouveau service "Background Worker"**
2. **Configuration :**
   - **Name** : `silence-dor-worker`
   - **Environment** : `Python 3`
   - **Build Command** : `pip install -r requirements.txt`
   - **Start Command** : `celery -A silence_dor worker --loglevel=info`

### **2. Celery Beat (optionnel)**

Pour les t√¢ches programm√©es :

1. **Cr√©er un nouveau service "Background Worker"**
2. **Configuration :**
   - **Name** : `silence-dor-beat`
   - **Environment** : `Python 3`
   - **Build Command** : `pip install -r requirements.txt`
   - **Start Command** : `celery -A silence_dor beat --loglevel=info`

---

## üöÄ **D√©ploiement**

### **1. D√©ployer l'Application**

1. **Cliquer sur "Create Web Service"**
2. **Attendre la construction** (5-10 minutes)
3. **V√©rifier les logs** pour d√©tecter les erreurs

### **2. V√©rifier le D√©ploiement**

1. **Aller sur l'URL fournie** : `https://silence-dor.onrender.com`
2. **Tester le health check** : `https://silence-dor.onrender.com/health/`
3. **V√©rifier l'admin** : `https://silence-dor.onrender.com/admin/`

### **3. Cr√©er un Superutilisateur**

```bash
# Via le terminal Render ou en local
python manage.py createsuperuser --settings=silence_dor.settings_production
```

---

## üîß **Configuration Post-D√©ploiement**

### **1. Initialiser les Donn√©es**

1. **Se connecter √† l'admin** : `/admin/`
2. **Configurer les informations du site** : `Core > Site Information`
3. **Ajouter des cat√©gories** : `Products > Categories`
4. **Ajouter des produits** : `Products > Products`

### **2. Configuration des Emails**

1. **Aller dans l'admin**
2. **Configurer les templates d'emails**
3. **Tester l'envoi d'emails**

### **3. Configuration Stripe**

1. **Ajouter les cl√©s Stripe** dans les variables d'environnement
2. **Configurer les webhooks** dans le dashboard Stripe
3. **Tester les paiements**

---

## üìä **Monitoring et Maintenance**

### **1. Logs**

- **Acc√©der aux logs** : Onglet "Logs" dans Render
- **Surveiller les erreurs** : Rechercher "ERROR" ou "CRITICAL"
- **V√©rifier les performances** : Temps de r√©ponse

### **2. M√©triques**

- **CPU et RAM** : Surveillance automatique
- **Requ√™tes** : Nombre de requ√™tes par minute
- **Erreurs** : Taux d'erreur HTTP

### **3. Sauvegardes**

- **Base de donn√©es** : Sauvegardes automatiques quotidiennes
- **Fichiers** : Stockage persistant sur Render
- **Code** : Sauvegard√© sur GitHub

---

## üîí **S√©curit√©**

### **1. HTTPS**

- **Automatique** : Render fournit HTTPS automatiquement
- **Certificats** : G√©r√©s automatiquement
- **Redirection** : HTTP vers HTTPS automatique

### **2. Variables d'Environnement**

- **Secrets** : Stock√©s de mani√®re s√©curis√©e
- **Rotation** : Changer r√©guli√®rement les cl√©s
- **Acc√®s** : Limit√© aux administrateurs

### **3. Firewall**

- **DDoS Protection** : Incluse dans Render
- **Rate Limiting** : Configurable
- **IP Whitelisting** : Pour l'admin (optionnel)

---

## üÜò **D√©pannage**

### **1. Probl√®mes Courants**

#### **Erreur de Build**
```bash
# V√©rifier les logs de build
# V√©rifier requirements.txt
# V√©rifier la version Python
```

#### **Erreur de Base de Donn√©es**
```bash
# V√©rifier DATABASE_URL
# V√©rifier les migrations
# V√©rifier les permissions
```

#### **Erreur de Fichiers Statiques**
```bash
# V√©rifier collectstatic
# V√©rifier STATIC_ROOT
# V√©rifier WhiteNoise
```

### **2. Commandes de Diagnostic**

```bash
# V√©rifier la configuration
python manage.py check --settings=silence_dor.settings_production

# V√©rifier les migrations
python manage.py showmigrations --settings=silence_dor.settings_production

# Tester la base de donn√©es
python manage.py dbshell --settings=silence_dor.settings_production
```

### **3. Support**

- **Documentation Render** : https://render.com/docs
- **Community** : https://community.render.com
- **Support** : Via le dashboard Render

---

## üìà **Optimisation**

### **1. Performance**

- **Cache** : Utiliser Redis pour le cache
- **CDN** : Activer le CDN Render
- **Compression** : Gzip automatique
- **Images** : Optimiser les images

### **2. Co√ªts**

- **Plan Starter** : Gratuit (limit√©)
- **Plan Standard** : $7/mois (recommand√©)
- **Plan Pro** : $25/mois (haute disponibilit√©)

### **3. Scaling**

- **Horizontal** : Ajouter des instances
- **Vertical** : Augmenter les ressources
- **Auto-scaling** : Bas√© sur la charge

---

## üéâ **F√©licitations !**

Votre e-commerce "Silence d'Or" est maintenant d√©ploy√© sur Render ! 

### **Prochaines √âtapes :**

1. **üîß Configurer** les fonctionnalit√©s avanc√©es
2. **üìä Monitorer** les performances
3. **üöÄ Optimiser** selon les besoins
4. **üìà Analyser** les m√©triques
5. **üîÑ Maintenir** et mettre √† jour

### **URLs Importantes :**

- **Site principal** : `https://silence-dor.onrender.com`
- **Administration** : `https://silence-dor.onrender.com/admin/`
- **Health check** : `https://silence-dor.onrender.com/health/`
- **Analytics** : `https://silence-dor.onrender.com/analytics/`

**Bon succ√®s avec votre e-commerce en ligne ! üéä**

---

*Guide de d√©ploiement Render - Silence d'Or E-commerce*  
*Version 1.0 - Septembre 2025*
